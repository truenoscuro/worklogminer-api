@Library("custom-library") _

def remote = [:]
remote.name = "server"
remote.host = "172.17.177.22"
remote.allowAnyHosts = true
def funct = { c ->  sshCommand([remote: remote , command: "${c}",sudo: false])}
node {
    withCredentials([sshUserPrivateKey(
        credentialsId: 'server-docker', 
        keyFileVariable: 'keyFile',
        passphraseVariable: '', 
        usernameVariable: 'userName')]) {

        remote.user =  userName
        remote.identityFile = keyFile 
        funct("ls")
    }
    

}
